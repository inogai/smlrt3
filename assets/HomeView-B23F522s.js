var ut=Object.defineProperty;var lt=(e,t,n)=>t in e?ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var q=(e,t,n)=>lt(e,typeof t!="symbol"?t+"":t,n);import{d as S,c as C,x as G,o as p,a as O,w as m,r as D,m as A,u,b as v,V as ct,n as Ye,g as Ve,G as dt,q as ft,e as P,f as B,I as te,h as mt,C as ht,i as y,j as pt,H as gt,X as Ue,k as w,l as yt,p as vt,s as wt,t as bt,v as T,y as W,z as Z,K as _t,A as xt,W as St,B as kt,D as Pt,E as Ot,F as Et,J as Dt,L as Ie,M as He,N as V,O as Mt,P as Q,Q as U,R as Ct,S as $t,_ as Tt,T as Wt,U as At}from"./index-BP0oCDcX.js";import{_ as Ft,a as Nt,b as Bt,c as le,u as jt,d as Oe,e as Lt,f as Ee,g as De,h as Rt}from"./CardContent.vue_vue_type_script_setup_true_lang-Ch292f-E.js";const ze=6048e5,qt=864e5,ae=Symbol.for("constructDateFrom");function H(e,t){return typeof e=="function"?e(t):typeof e=="object"&&ae in e?e[ae](t):e instanceof Date?new e.constructor(t):new Date(t)}function N(e,t){if(t)return t(e);const n=Object.prototype.toString.call(e);return typeof e=="object"&&ae in e?e[ae](e):e instanceof Date||typeof e=="object"&&n==="[object Date]"?new e.constructor(+e):typeof e=="number"||n==="[object Number]"||typeof e=="string"||n==="[object String]"?new Date(e):new Date(NaN)}let Yt={};function oe(){return Yt}function ee(e,t){var i,l,f,b;const n=oe(),r=(t==null?void 0:t.weekStartsOn)??((l=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((b=(f=n.locale)==null?void 0:f.options)==null?void 0:b.weekStartsOn)??0,a=N(e,t==null?void 0:t.in),s=a.getDay(),o=(s<r?7:0)+s-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function se(e,t){return ee(e,{...t,weekStartsOn:1})}function Qe(e,t){const n=N(e,t==null?void 0:t.in),r=n.getFullYear(),a=H(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const s=se(a),o=H(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=se(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=i.getTime()?r:r-1}function Me(e){const t=N(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Vt(e,...t){const n=H.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function Ce(e,t){const n=N(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Ut(e,t,n){const[r,a]=Vt(n==null?void 0:n.in,e,t),s=Ce(r),o=Ce(a),i=+s-Me(s),l=+o-Me(o);return Math.round((i-l)/qt)}function It(e,t){const n=Qe(e,t),r=H(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),se(r)}function Ht(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function zt(e){return!(!Ht(e)&&typeof e!="number"||isNaN(+N(e)))}function Qt(e,t){const n=N(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Gt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xt=(e,t,n)=>{let r;const a=Gt[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ce(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Kt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Jt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Zt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},en={date:ce({formats:Kt,defaultWidth:"full"}),time:ce({formats:Jt,defaultWidth:"full"}),dateTime:ce({formats:Zt,defaultWidth:"full"})},tn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nn=(e,t,n,r)=>tn[e];function K(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,i=n!=null&&n.width?String(n.width):o;a=e.formattingValues[i]||e.formattingValues[o]}else{const o=e.defaultWidth,i=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[i]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const rn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},an={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},on={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},un={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ln={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cn=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},dn={ordinalNumber:cn,era:K({values:rn,defaultWidth:"wide"}),quarter:K({values:an,defaultWidth:"wide",argumentCallback:e=>e-1}),month:K({values:sn,defaultWidth:"wide"}),day:K({values:on,defaultWidth:"wide"}),dayPeriod:K({values:un,defaultWidth:"wide",formattingValues:ln,defaultFormattingWidth:"wide"})};function J(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?mn(i,_=>_.test(o)):fn(i,_=>_.test(o));let f;f=e.valueCallback?e.valueCallback(l):l,f=n.valueCallback?n.valueCallback(f):f;const b=t.slice(o.length);return{value:f,rest:b}}}function fn(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function mn(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function hn(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const i=t.slice(a.length);return{value:o,rest:i}}}const pn=/^(\d+)(th|st|nd|rd)?/i,gn=/\d+/i,yn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vn={any:[/^b/i,/^(a|c)/i]},wn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bn={any:[/1/i,/2/i,/3/i,/4/i]},_n={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Sn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Pn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},On={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},En={ordinalNumber:hn({matchPattern:pn,parsePattern:gn,valueCallback:e=>parseInt(e,10)}),era:J({matchPatterns:yn,defaultMatchWidth:"wide",parsePatterns:vn,defaultParseWidth:"any"}),quarter:J({matchPatterns:wn,defaultMatchWidth:"wide",parsePatterns:bn,defaultParseWidth:"any",valueCallback:e=>e+1}),month:J({matchPatterns:_n,defaultMatchWidth:"wide",parsePatterns:xn,defaultParseWidth:"any"}),day:J({matchPatterns:Sn,defaultMatchWidth:"wide",parsePatterns:kn,defaultParseWidth:"any"}),dayPeriod:J({matchPatterns:Pn,defaultMatchWidth:"any",parsePatterns:On,defaultParseWidth:"any"})},Dn={code:"en-US",formatDistance:Xt,formatLong:en,formatRelative:nn,localize:dn,match:En,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Mn(e,t){const n=N(e,t==null?void 0:t.in);return Ut(n,Qt(n))+1}function Cn(e,t){const n=N(e,t==null?void 0:t.in),r=+se(n)-+It(n);return Math.round(r/ze)+1}function Ge(e,t){var b,_,E,h;const n=N(e,t==null?void 0:t.in),r=n.getFullYear(),a=oe(),s=(t==null?void 0:t.firstWeekContainsDate)??((_=(b=t==null?void 0:t.locale)==null?void 0:b.options)==null?void 0:_.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(E=a.locale)==null?void 0:E.options)==null?void 0:h.firstWeekContainsDate)??1,o=H((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const i=ee(o,t),l=H((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const f=ee(l,t);return+n>=+i?r+1:+n>=+f?r:r-1}function $n(e,t){var i,l,f,b;const n=oe(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((b=(f=n.locale)==null?void 0:f.options)==null?void 0:b.firstWeekContainsDate)??1,a=Ge(e,t),s=H((t==null?void 0:t.in)||e,0);return s.setFullYear(a,0,r),s.setHours(0,0,0,0),ee(s,t)}function Tn(e,t){const n=N(e,t==null?void 0:t.in),r=+ee(n,t)-+$n(n,t);return Math.round(r/ze)+1}function x(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Y={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return x(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):x(n+1,2)},d(e,t){return x(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return x(e.getHours()%12||12,t.length)},H(e,t){return x(e.getHours(),t.length)},m(e,t){return x(e.getMinutes(),t.length)},s(e,t){return x(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return x(a,t.length)}},z={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$e={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Y.y(e,t)},Y:function(e,t,n,r){const a=Ge(e,r),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return x(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):x(s,t.length)},R:function(e,t){const n=Qe(e);return x(n,t.length)},u:function(e,t){const n=e.getFullYear();return x(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return x(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return x(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Y.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return x(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Tn(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):x(a,t.length)},I:function(e,t,n){const r=Cn(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):x(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Y.d(e,t)},D:function(e,t,n){const r=Mn(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):x(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return x(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return x(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return x(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=z.noon:r===0?a=z.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=z.evening:r>=12?a=z.afternoon:r>=4?a=z.morning:a=z.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Y.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Y.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):x(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):x(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Y.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Y.s(e,t)},S:function(e,t){return Y.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return We(r);case"XXXX":case"XX":return I(r);case"XXXXX":case"XXX":default:return I(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return We(r);case"xxxx":case"xx":return I(r);case"xxxxx":case"xxx":default:return I(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Te(r,":");case"OOOO":default:return"GMT"+I(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Te(r,":");case"zzzz":default:return"GMT"+I(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return x(r,t.length)},T:function(e,t,n){const r=e.getTime();return x(r,t.length)}};function Te(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return s===0?n+String(a):n+String(a)+t+x(s,2)}function We(e,t){return e%60===0?(e>0?"-":"+")+x(Math.abs(e)/60,2):I(e,t)}function I(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=x(Math.trunc(r/60),2),s=x(r%60,2);return n+a+t+s}const Ae=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Xe=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Wn=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return Ae(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Ae(r,t)).replace("{{time}}",Xe(a,t))},An={p:Xe,P:Wn},Fn=/^D+$/,Nn=/^Y+$/,Bn=["D","DD","YY","YYYY"];function jn(e){return Fn.test(e)}function Ln(e){return Nn.test(e)}function Rn(e,t,n){const r=qn(e,t,n);if(console.warn(r),Bn.includes(e))throw new RangeError(r)}function qn(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Yn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Un=/^'([^]*?)'?$/,In=/''/g,Hn=/[a-zA-Z]/;function zn(e,t,n){var b,_,E,h;const r=oe(),a=r.locale??Dn,s=r.firstWeekContainsDate??((_=(b=r.locale)==null?void 0:b.options)==null?void 0:_.firstWeekContainsDate)??1,o=r.weekStartsOn??((h=(E=r.locale)==null?void 0:E.options)==null?void 0:h.weekStartsOn)??0,i=N(e);if(!zt(i))throw new RangeError("Invalid time value");let l=t.match(Vn).map(d=>{const c=d[0];if(c==="p"||c==="P"){const g=An[c];return g(d,a.formatLong)}return d}).join("").match(Yn).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const c=d[0];if(c==="'")return{isToken:!1,value:Qn(d)};if($e[c])return{isToken:!0,value:d};if(c.match(Hn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+c+"`");return{isToken:!1,value:d}});a.localize.preprocessor&&(l=a.localize.preprocessor(i,l));const f={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return l.map(d=>{if(!d.isToken)return d.value;const c=d.value;(Ln(c)||jn(c))&&Rn(c,t,String(e));const g=$e[c[0]];return g(i,c,a.localize,f)}).join("")}function Qn(e){const t=e.match(Un);return t?t[1].replace(In,"'"):e}var we={done:!1,hasNext:!1};function pe(e,...t){let n=e,r=t.map(s=>"lazy"in s?Gn(s):void 0),a=0;for(;a<t.length;){if(r[a]===void 0||!Xn(n)){let l=t[a];n=l(n),a+=1;continue}let s=[];for(let l=a;l<t.length;l++){let f=r[l];if(f===void 0||(s.push(f),f.isSingle))break}let o=[];for(let l of n)if(Ke(l,o,s))break;let{isSingle:i}=s.at(-1);n=i?o[0]:o,a+=s.length}return n}function Ke(e,t,n){if(n.length===0)return t.push(e),!1;let r=e,a=we,s=!1;for(let[o,i]of n.entries()){let{index:l,items:f}=i;if(f.push(r),a=i(r,l,f),i.index+=1,a.hasNext){if(a.hasMany??!1){for(let b of a.next)if(Ke(b,t,n.slice(o+1)))return!0;return s}r=a.next}if(!a.hasNext)break;a.done&&(s=!0)}return a.hasNext&&t.push(r),s}function Gn(e){let{lazy:t,lazyArgs:n}=e,r=t(...n);return Object.assign(r,{isSingle:t.single??!1,index:0,items:[]})}function Xn(e){return typeof e=="string"||typeof e=="object"&&e!==null&&Symbol.iterator in e}function Kn(e,t){let n=t.length-e.length;if(n===1){let[r,...a]=t;return pe(r,{lazy:e,lazyArgs:a})}if(n===0){let r={lazy:e,lazyArgs:t};return Object.assign(a=>pe(a,r),r)}throw new Error("Wrong number of arguments")}function Jn(...e){return Kn(Zn,e)}function Zn(e){let t=e,n=new Set;return(r,a,s)=>{let o=t(r,a,s);return n.has(o)?we:(n.add(o),{done:!1,hasNext:!0,next:r})}}function er(e,t,n){let r=a=>e(a,...t);return n===void 0?r:Object.assign(r,{lazy:n,lazyArgs:t})}function tr(e,t,n){let r=e.length-t.length;if(r===0)return e(...t);if(r===1)return er(e,t,n);throw new Error("Wrong number of arguments")}var Je={asc:(e,t)=>e>t,desc:(e,t)=>e<t};function nr(e,t){let[n,...r]=t;if(!rr(n)){let s=ge(...r);return e(n,s)}let a=ge(n,...r);return s=>e(s,a)}function ge(e,t,...n){let r=typeof e=="function"?e:e[0],a=typeof e=="function"?"asc":e[1],{[a]:s}=Je,o=t===void 0?void 0:ge(t,...n);return(i,l)=>{let f=r(i),b=r(l);return s(f,b)?1:s(b,f)?-1:(o==null?void 0:o(i,l))??0}}function rr(e){if(Fe(e))return!0;if(typeof e!="object"||!Array.isArray(e))return!1;let[t,n,...r]=e;return Fe(t)&&typeof n=="string"&&n in Je&&r.length===0}var Fe=e=>typeof e=="function"&&e.length===1;function ar(...e){return nr(sr,e)}var sr=(e,t)=>[...e].sort(t);function or(...e){return tr(ir,e,ur)}var ir=(e,t)=>e.filter(t),ur=e=>(t,n,r)=>e(t,n,r)?{done:!1,hasNext:!0,next:t}:we;const lr=S({__name:"Command",props:{modelValue:{default:""},defaultValue:{},open:{type:Boolean,default:!0},defaultOpen:{type:Boolean},searchTerm:{},selectedValue:{},multiple:{type:Boolean},disabled:{type:Boolean},name:{},dir:{},filterFunction:{},displayValue:{},resetSearchTermOnBlur:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","update:open","update:searchTerm","update:selectedValue"],setup(e,{emit:t}){const n=e,r=t,a=C(()=>{const{class:o,...i}=n;return i}),s=G(a,r);return(o,i)=>(p(),O(u(ct),A(u(s),{class:u(v)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n.class)}),{default:m(()=>[D(o.$slots,"default")]),_:3},16,["class"]))}}),cr=S({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(e,{emit:t}){const a=G(e,t);return(s,o)=>(p(),O(u(dt),Ye(Ve(u(a))),{default:m(()=>[D(s.$slots,"default")]),_:3},16))}}),dr=S({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(e){const t=e;return(n,r)=>(p(),O(u(ft),Ye(Ve(t)),{default:m(()=>[D(n.$slots,"default")]),_:3},16))}}),fr=S({__name:"DialogHeader",props:{class:{}},setup(e){const t=e;return(n,r)=>(p(),P("div",{class:B(u(v)("flex flex-col gap-y-1.5 text-center sm:text-left",t.class))},[D(n.$slots,"default")],2))}}),mr=S({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,n=C(()=>{const{class:a,...s}=t;return s}),r=te(n);return(a,s)=>(p(),O(u(mt),A(u(r),{class:u(v)("text-lg font-semibold leading-none tracking-tight",t.class)}),{default:m(()=>[D(a.$slots,"default")]),_:3},16,["class"]))}}),hr=S({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,n=C(()=>{const{class:a,...s}=t;return s}),r=te(n);return(a,s)=>(p(),O(u(ht),A(u(r),{class:u(v)("text-sm text-muted-foreground",t.class)}),{default:m(()=>[D(a.$slots,"default")]),_:3},16,["class"]))}}),pr=S({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,r=t,a=C(()=>{const{class:o,...i}=n;return i}),s=G(a,r);return(o,i)=>(p(),O(u(vt),null,{default:m(()=>[y(u(pt),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),y(u(yt),A(u(s),{class:u(v)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n.class)}),{default:m(()=>[D(o.$slots,"default"),y(u(gt),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:m(()=>[y(u(Ue),{class:"w-4 h-4"}),i[0]||(i[0]=w("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),gr=S({__name:"DialogFooter",props:{class:{}},setup(e){const t=e;return(n,r)=>(p(),P("div",{class:B(u(v)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",t.class))},[D(n.$slots,"default")],2))}}),yr=S({__name:"CommandEmpty",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,n=C(()=>{const{class:r,...a}=t;return a});return(r,a)=>(p(),O(u(wt),A(n.value,{class:u(v)("py-6 text-center text-sm",t.class)}),{default:m(()=>[D(r.$slots,"default")]),_:3},16,["class"]))}}),vr=S({__name:"CommandGroup",props:{asChild:{type:Boolean},as:{},class:{},heading:{}},setup(e){const t=e,n=C(()=>{const{class:r,...a}=t;return a});return(r,a)=>(p(),O(u(_t),A(n.value,{class:u(v)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t.class)}),{default:m(()=>[r.heading?(p(),O(u(bt),{key:0,class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:m(()=>[T(W(r.heading),1)]),_:1})):Z("",!0),D(r.$slots,"default")]),_:3},16,["class"]))}}),wr=S({__name:"CommandItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["select"],setup(e,{emit:t}){const n=e,r=t,a=C(()=>{const{class:o,...i}=n;return i}),s=G(a,r);return(o,i)=>(p(),O(u(xt),A(u(s),{class:u(v)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n.class)}),{default:m(()=>[D(o.$slots,"default")]),_:3},16,["class"]))}}),br={role:"presentation"},_r=S({__name:"CommandList",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},dismissable:{type:Boolean,default:!1},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(e,{emit:t}){const n=e,r=t,a=C(()=>{const{class:o,...i}=n;return i}),s=G(a,r);return(o,i)=>(p(),O(u(St),A(u(s),{class:u(v)("max-h-[300px] overflow-y-auto overflow-x-hidden",n.class)}),{default:m(()=>[w("div",br,[D(o.$slots,"default")])]),_:3},16,["class"]))}}),xr=S({__name:"TagsInput",props:{modelValue:{},defaultValue:{},addOnPaste:{type:Boolean},addOnTab:{type:Boolean},addOnBlur:{type:Boolean},duplicate:{type:Boolean},disabled:{type:Boolean},delimiter:{},dir:{},max:{},required:{type:Boolean},name:{},id:{},convertValue:{type:Function},displayValue:{type:Function},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","invalid"],setup(e,{emit:t}){const n=e,r=t,a=C(()=>{const{class:o,...i}=n;return i}),s=G(a,r);return(o,i)=>(p(),O(u(kt),A(u(s),{class:u(v)("flex flex-wrap gap-2 items-center rounded-md border border-input bg-background px-3 py-2 text-sm",n.class)}),{default:m(()=>[D(o.$slots,"default")]),_:3},16,["class"]))}}),Sr=S({__name:"TagsInputInput",props:{placeholder:{},autoFocus:{type:Boolean},maxLength:{},asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,n=C(()=>{const{class:a,...s}=t;return s}),r=te(n);return(a,s)=>(p(),O(u(Pt),A(u(r),{class:u(v)(`
      min-h-6 flex-1 bg-transparent px-1 text-sm
      focus:outline-none
    `,t.class)}),{default:m(()=>[D(a.$slots,"default")]),_:3},16,["class"]))}}),kr=S({__name:"TagsInputItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{},variant:{}},setup(e){const t=e,n=C(()=>{const{class:a,...s}=t;return s}),r=te(n);return(a,s)=>(p(),O(u(Ot),A(u(r),{class:u(v)(`
      flex h-6 items-center rounded bg-secondary ring-offset-background
      data-[state=active]:ring-2 data-[state=active]:ring-ring
      data-[state=active]:ring-offset-2
    `,t.class)}),{default:m(()=>[D(a.$slots,"default")]),_:3},16,["class"]))}}),Pr=S({__name:"TagsInputItemDelete",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,n=C(()=>{const{class:a,...s}=t;return s}),r=te(n);return(a,s)=>(p(),O(u(Et),A(u(r),{class:u(v)("flex rounded bg-transparent mr-1",t.class)}),{default:m(()=>[D(a.$slots,"default",{},()=>[y(u(Ue),{class:"w-4 h-4"})])]),_:3},16,["class"]))}}),Or={Text:e=>({kind:"Text",value:e}),Dest:e=>({kind:"Dest",value:e}),Route:e=>({kind:"Route",value:e}),Stop:e=>({kind:"Stop",value:e}),Co:e=>({kind:"Co",value:e}),Not:e=>({kind:"Not",value:e})},$=Object.assign(Or,{parse:e=>{if(e.startsWith("!"))return $.Not($.parse(e.slice(1)));if(!e.includes(":"))return $.Text(e);const[t,n]=e.split(":");switch(t){case"dest":return $.Dest(n);case"route":return $.Route(n);case"stop":return $.Stop(n);case"co":return $.Co(n);default:return console.error(`Unknown rule: ${t}`),$.Text(e)}},prototype:{colorClass(){return{Text:v`bg-gray-200`,Dest:v`bg-blue-600 text-white`,Route:v`bg-yellow-600 text-white`,Stop:v`bg-red-600 text-white`,Co:v`bg-purple-500 text-white`,Not:v`bg-gray-700 text-white`}[this.kind]},evaluate(e){switch(this.kind){case"Text":return e.route().name().includes(this.value)||e.route().dest().includes(this.value)||e.station().name().includes(this.value);case"Dest":return e.route().dest().includes(this.value);case"Route":return e.route().name()===this.value;case"Stop":return e.station().name()===this.value;case"Co":return e.co()===this.value;case"Not":return!$.prototype.evaluate.call(this.value,e);default:throw new Error("Unknown type")}}}});function Er(e){const t=[];let n=0;for(let r=0;r<e.length;r++)if(e[r].toLowerCase()!==e[r]){const s=e.slice(n,r-1).toLowerCase();t.push(s),n=r}return t.push(e.slice(n).toLowerCase()),t}function Dr(e){return e.map(t=>t[0].toUpperCase()+t.slice(1)).join(" ")}var M=[];for(var de=0;de<256;++de)M.push((de+256).toString(16).slice(1));function Mr(e,t=0){return(M[e[t+0]]+M[e[t+1]]+M[e[t+2]]+M[e[t+3]]+"-"+M[e[t+4]]+M[e[t+5]]+"-"+M[e[t+6]]+M[e[t+7]]+"-"+M[e[t+8]]+M[e[t+9]]+"-"+M[e[t+10]]+M[e[t+11]]+M[e[t+12]]+M[e[t+13]]+M[e[t+14]]+M[e[t+15]]).toLowerCase()}var ne,Cr=new Uint8Array(16);function $r(){if(!ne&&(ne=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ne))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ne(Cr)}var Tr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Ne={randomUUID:Tr};function Wr(e,t,n){if(Ne.randomUUID&&!t&&!e)return Ne.randomUUID();e=e||{};var r=e.random||(e.rng||$r)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Mr(r)}function Be(e,t=Wr()){return Object.assign(e,{key:t})}const ye=S({__name:"Badge",props:{variant:{},class:{}},setup(e){const t=e;return(n,r)=>(p(),P("div",{class:B(u(v)(u(Ar)({variant:n.variant}),t.class))},[D(n.$slots,"default")],2))}}),Ar=Dt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),Fr={class:"flex"},Nr={class:"px-1 font-semibold"},Br={class:"flex items-center rounded-r-[calc(var(--radius)-6px)] bg-secondary pl-1.5 text-secondary-foreground"},jr={class:"flex grow items-center"},Lr=["value"],Rr={key:0,class:"flex gap-x-2"},qr={class:"text-muted-foreground"},Yr=S({__name:"EtaFilterInput",props:Ie({etaEntries:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=He(e,"modelValue"),r=V(!1),a=V("");function s(h){return Array.from(new Set(h))}const o=C(()=>{const h={};a.value.includes(":")||(h.Category=[{value:"stop:",desc:"Search stop name"},{value:"route:",desc:"Search route name"},{value:"dest:",desc:"Search destination terminal"},{value:"co:",badges:["KMB"],desc:"Search services"}]);for(const[d,c]of Object.entries({stop:g=>g.entry.station().name(),route:g=>g.entry.route().name(),dest:g=>g.entry.route().dest(),co:g=>g.entry.co()}))a.value.startsWith(`${d}:`)&&(h[Dr(Er(d))]=s(t.etaEntries.map(c)).filter(g=>g.includes(a.value.slice(d.length+1))).map(g=>({value:`${d}:${g}`,action:"compose",desc:"Compose filter"})));return h}),i=V(null),l=V(null);function f(h){switch(h.action){case"compose":_(h);break;case"accept":default:b(h)}}function b(h){a.value=h.value,i.value&&i.value.focus()}function _(h){n.value.push(Be($.parse(h.value))),a.value="",i.value&&i.value.focus()}function E(h){if(!h.relatedTarget||!l.value){r.value=!1;return}l.value.contains&&!l.value.contains(h.relatedTarget)&&(r.value=!1)}return(h,d)=>(p(),O(u(Nt),{open:r.value},{default:m(()=>[y(u(lr),null,{default:m(()=>[y(u(Mt),{"as-child":""},{default:m(()=>[y(u(xr),{modelValue:n.value,"onUpdate:modelValue":d[3]||(d[3]=c=>n.value=c),"convert-value":c=>u(Be)(u($).parse(c)),"display-value":()=>""},{default:m(()=>[(p(!0),P(U,null,Q(n.value,c=>(p(),O(u(kr),{key:c.key,class:B(["px-0.5",u($).prototype.colorClass.call(c)]),value:c,"as-child":""},{default:m(()=>[w("div",Fr,[w("div",Nr,W(c.kind.toUpperCase()),1),d[5]||(d[5]=w("div",{class:"w-0.5"},null,-1)),w("div",Br,[w("div",null,W(c.value),1),d[4]||(d[4]=w("div",{class:"w-1"},null,-1)),y(u(Pr))])])]),_:2},1032,["class","value"]))),128)),w("div",jr,[y(u(Ct),{class:"grow","as-child":""},{default:m(()=>[y(u(Sr),{placeholder:"Type then press Enter to filter...","as-child":""},{default:m(()=>[w("input",{ref_key:"inputEl",ref:i,value:a.value,onInput:d[0]||(d[0]=c=>{var g;return a.value=((g=c.target)==null?void 0:g.value)??""}),onFocus:d[1]||(d[1]=c=>r.value=!0),onBlur:E},null,40,Lr)]),_:1})]),_:1}),w("div",{class:"text-xl i-mdi-trash cursor-pointer opacity-50",role:"button","aria-label":"Clear all filters",onClick:d[2]||(d[2]=c=>n.value=[])})])]),_:1},8,["modelValue","convert-value"])]),_:1}),y(u(Ft),{ref_key:"popoverContentEl",ref:l,class:"w-[--radix-popper-anchor-width] px-2 py-0",onBlur:E},{default:m(()=>[y(u(_r),null,{default:m(()=>[y(u(yr),null,{default:m(()=>d[6]||(d[6]=[T("No suggestion.")])),_:1}),(p(!0),P(U,null,Q(o.value,(c,g)=>(p(),O(u(vr),{key:g,heading:g},{default:m(()=>[(p(!0),P(U,null,Q(c,k=>(p(),O(u(wr),{key:k.value,value:k.value,class:"flex items-center",onClick:$t(L=>f(k),["prevent"])},{default:m(()=>[w("div",null,W(k.value),1),d[7]||(d[7]=w("div",{class:"w-4"},null,-1)),k.badges?(p(),P("div",Rr,[(p(!0),P(U,null,Q(k.badges,L=>(p(),O(u(ye),{key:L,class:"bg-muted text-muted-foreground hover:bg-secondary/50"},{default:m(()=>[T(W(L),1)]),_:2},1024))),128))])):Z("",!0),d[8]||(d[8]=w("div",{class:"w-1 grow"},null,-1)),w("div",qr,W(k.desc),1)]),_:2},1032,["value","onClick"]))),128))]),_:2},1032,["heading"]))),128))]),_:1})]),_:1},512)]),_:1})]),_:1},8,["open"]))}}),Vr={class:"flex items-stretch"},Ur={class:"flex flex-col justify-center"},Ir={class:"flex flex-col justify-center"},Hr={class:"flex max-w-40 flex-col text-sm"},zr={class:"overflow-x-hidden text-ellipsis text-nowrap"},Qr={class:"text-lg font-semibold text-tinted-primary"},Gr={class:"overflow-x-hidden text-ellipsis text-nowrap"},Xr={class:"flex flex-col justify-center"},Kr={class:"flex max-w-32 flex-row flex-nowrap items-baseline"},Jr={class:"min-w-0 shrink overflow-x-hidden text-ellipsis text-nowrap"},Zr={key:0,class:"text-sm"},ea={key:0},ta=S({__name:"EtaItem",props:Ie({item:{}},{isFavourite:{type:Boolean,required:!0},isFavouriteModifiers:{}}),emits:["update:isFavourite"],setup(e){const t=He(e,"isFavourite");function n(){t.value=!t.value}return(r,a)=>(p(),P("div",Vr,[w("div",Ur,[w("div",{class:B(["flex h-full cursor-pointer flex-col justify-center rounded-l-md p-1",{"bg-primary text-primary-foreground":t.value}]),onClick:n},[w("i",{class:B(["text-xl",{"i-mdi-star":t.value,"i-mdi-star-outline":!t.value}])},null,2)],2)]),a[1]||(a[1]=w("div",{class:"w-1"},null,-1)),w("div",Ir,[w("div",{class:B(["flex w-12 justify-center rounded-full text-sm font-semibold text-white",r.item.route().color()])},W(r.item.route().name()),3)]),a[2]||(a[2]=w("div",{class:"w-2"},null,-1)),w("div",Hr,[w("div",zr,[a[0]||(a[0]=T(" 往 ")),w("span",Qr,W(r.item.route().dest()),1)]),w("div",Gr,W(r.item.station().name()),1)]),a[3]||(a[3]=w("div",{class:"w-2 grow"},null,-1)),w("div",Xr,[w("div",Kr,[w("div",Jr,[(p(!0),P(U,null,Q(r.item.items(),(s,o)=>(p(),P("span",{key:o},[s.val.kind==="JustDeparted"?(p(),P("span",Zr," 已開出 ")):s.val.kind==="MinutesLeft"?(p(),P("span",{key:1,class:B({"text-xl font-bold text-tinted-primary":(o===0||r.item.items().slice(0,o).every(({val:i})=>i.kind==="JustDeparted"))&&s.val.kind==="MinutesLeft"})},W(s.val.value),3)):s.val.kind==="NoEta"?(p(),P(U,{key:2},[T(" 沒有班次 ")],64)):Z("",!0),o!==r.item.items().length-1?(p(),P(U,{key:3},[T(", ")],64)):Z("",!0)]))),128))]),r.item.items()[r.item.items().length-1].val.kind==="MinutesLeft"?(p(),P("div",ea,"  分鐘 ")):Z("",!0)])])]))}}),na={class:"text-left"},ra={class:"flex justify-end space-x-2"},aa=S({__name:"SettingsDialog",setup(e){const t=V(!1);function n(){t.value=!0}const r=V(!1);function a(){r.value=!1}return(s,o)=>(p(),O(u(cr),{open:r.value,"onUpdate:open":o[3]||(o[3]=i=>r.value=i)},{default:m(()=>[y(u(dr),{class:"inline-flex items-center rounded-md border bg-primary p-0.5 text-xs text-primary-foreground"},{default:m(()=>o[4]||(o[4]=[w("div",{class:"flex size-4 items-center justify-center"},[w("i",{class:"i-mdi-settings"})],-1)])),_:1}),y(u(pr),null,{default:m(()=>[y(u(fr),null,{default:m(()=>[y(u(mr),null,{default:m(()=>o[5]||(o[5]=[T("Settings")])),_:1}),y(u(hr),null,{default:m(()=>[w("div",na,[y(Bt,{"trigger-submit":t.value},null,8,["trigger-submit"])])]),_:1})]),_:1}),y(u(gr),null,{default:m(()=>[w("div",ra,[y(le,{type:"submit",onClick:o[0]||(o[0]=i=>{n(),a()})},{default:m(()=>o[6]||(o[6]=[T(" Apply and Close ")])),_:1}),y(le,{type:"submit",onClick:o[1]||(o[1]=i=>n())},{default:m(()=>o[7]||(o[7]=[T(" Apply ")])),_:1}),y(le,{type:"reset",variant:"destructive",onClick:o[2]||(o[2]=i=>a())},{default:m(()=>o[8]||(o[8]=[T(" Close ")])),_:1})])]),_:1})]),_:1})]),_:1},8,["open"]))}}),sa=S({__name:"CardHeader",props:{class:{}},setup(e){const t=e;return(n,r)=>(p(),P("div",{class:B(u(v)("flex flex-col gap-y-1.5 p-6",t.class))},[D(n.$slots,"default")],2))}}),oa=S({__name:"CardTitle",props:{class:{}},setup(e){const t=e;return(n,r)=>(p(),P("h3",{class:B(u(v)("text-2xl font-semibold leading-none tracking-tight",t.class))},[D(n.$slots,"default")],2))}});function ia(){return new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t)})}const ua=/\{[^{}]+\}/g,ie=({allowReserved:e,name:t,value:n})=>{if(n==null)return"";if(typeof n=="object")throw new Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${t}=${e?n:encodeURIComponent(n)}`},Ze=({allowReserved:e,explode:t,name:n,style:r,value:a})=>{if(!t){const i=(e?a:a.map(l=>encodeURIComponent(l))).join((l=>{switch(l){case"form":default:return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20"}})(r));switch(r){case"label":return`.${i}`;case"matrix":return`;${n}=${i}`;case"simple":return i;default:return`${n}=${i}`}}const s=(i=>{switch(i){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}})(r),o=a.map(i=>r==="label"||r==="simple"?e?i:encodeURIComponent(i):ie({allowReserved:e,name:n,value:i})).join(s);return r==="label"||r==="matrix"?s+o:o},et=({allowReserved:e,explode:t,name:n,style:r,value:a})=>{if(a instanceof Date)return`${n}=${a.toISOString()}`;if(r!=="deepObject"&&!t){let i=[];Object.entries(a).forEach(([f,b])=>{i=[...i,f,e?b:encodeURIComponent(b)]});const l=i.join(",");switch(r){case"form":return`${n}=${l}`;case"label":return`.${l}`;case"matrix":return`;${n}=${l}`;default:return l}}const s=(i=>{switch(i){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}})(r),o=Object.entries(a).map(([i,l])=>ie({allowReserved:e,name:r==="deepObject"?`${n}[${i}]`:i,value:l})).join(s);return r==="label"||r==="matrix"?s+o:o},tt=({allowReserved:e,array:t,object:n}={})=>r=>{let a=[];if(r&&typeof r=="object")for(const s in r){const o=r[s];o!=null&&(a=Array.isArray(o)?[...a,Ze({allowReserved:e,explode:!0,name:s,style:"form",value:o,...t})]:typeof o!="object"?[...a,ie({allowReserved:e,name:s,value:o})]:[...a,et({allowReserved:e,explode:!0,name:s,style:"deepObject",value:o,...n})])}return a.join("&")},la=({baseUrl:e,path:t,query:n,querySerializer:r,url:a})=>{let s=e+(a.startsWith("/")?a:`/${a}`);t&&(s=(({path:i,url:l})=>{let f=l;const b=l.match(ua);if(b)for(const _ of b){let E=!1,h=_.substring(1,_.length-1),d="simple";h.endsWith("*")&&(E=!0,h=h.substring(0,h.length-1)),h.startsWith(".")?(h=h.substring(1),d="label"):h.startsWith(";")&&(h=h.substring(1),d="matrix");const c=i[h];c!=null&&(f=Array.isArray(c)?f.replace(_,Ze({explode:E,name:h,style:d,value:c})):typeof c!="object"?d!=="matrix"?f.replace(_,d==="label"?`.${c}`:c):f.replace(_,`;${ie({name:h,value:c})}`):f.replace(_,et({explode:E,name:h,style:d,value:c})))}return f})({path:t,url:s}));let o=n?r(n):"";return o.startsWith("?")&&(o=o.substring(1)),o&&(s+=`?${o}`),s},je=(e,t)=>{var r;const n={...e,...t};return(r=n.baseUrl)!=null&&r.endsWith("/")&&(n.baseUrl=n.baseUrl.substring(0,n.baseUrl.length-1)),n.headers=nt(e.headers,t.headers),n},nt=(...e)=>{const t=new Headers;for(const n of e){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[a,s]of r)if(s===null)t.delete(a);else if(Array.isArray(s))for(const o of s)t.append(a,o);else s!==void 0&&t.set(a,typeof s=="object"?JSON.stringify(s):s)}return t};class Le{constructor(){q(this,"_fns");this._fns=[]}eject(t){const n=this._fns.indexOf(t);n!==-1&&(this._fns=[...this._fns.slice(0,n),...this._fns.slice(n+1)])}use(t){this._fns=[...this._fns,t]}}const ca={bodySerializer:e=>JSON.stringify(e)},da=tt({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),fa={"Content-Type":"application/json"},be=(e={})=>({...ca,baseUrl:"",fetch:globalThis.fetch,headers:fa,parseAs:"auto",querySerializer:da,...e}),ue=(e={})=>{let t=je(be(),e);const n=()=>({...t}),r={request:new Le,response:new Le},a=async s=>{const o={...t,...s,headers:nt(t.headers,s.headers)};o.body&&o.bodySerializer&&(o.body=o.bodySerializer(o.body)),o.body||o.headers.delete("Content-Type");const i=la({baseUrl:o.baseUrl??"",path:o.path,query:o.query,querySerializer:typeof o.querySerializer=="function"?o.querySerializer:tt(o.querySerializer),url:o.url}),l={redirect:"follow",...o};let f=new Request(i,l);for(const d of r.request._fns)f=await d(f,o);const b=o.fetch;let _=await b(f);for(const d of r.response._fns)_=await d(_,f,o);const E={request:f,response:_};if(_.ok){if(_.status===204||_.headers.get("Content-Length")==="0")return{data:{},...E};if(o.parseAs==="stream")return{data:_.body,...E};const d=(o.parseAs==="auto"?(g=>{if(g)return g.startsWith("application/json")||g.endsWith("+json")?"json":g==="multipart/form-data"?"formData":["application/","audio/","image/","video/"].some(k=>g.startsWith(k))?"blob":g.startsWith("text/")?"text":void 0})(_.headers.get("Content-Type")):o.parseAs)??"json";let c=await _[d]();return d==="json"&&o.responseTransformer&&(c=await o.responseTransformer(c)),{data:c,...E}}let h=await _.text();if(o.throwOnError)throw new Error(h);try{h=JSON.parse(h)}catch{}return{error:h||{},...E}};return{connect:s=>a({...s,method:"CONNECT"}),delete:s=>a({...s,method:"DELETE"}),get:s=>a({...s,method:"GET"}),getConfig:n,head:s=>a({...s,method:"HEAD"}),interceptors:r,options:s=>a({...s,method:"OPTIONS"}),patch:s=>a({...s,method:"PATCH"}),post:s=>a({...s,method:"POST"}),put:s=>a({...s,method:"PUT"}),request:a,setConfig:s=>(t=je(t,s),n()),trace:s=>a({...s,method:"TRACE"})}},rt=ue(be()),ma=e=>((e==null?void 0:e.client)??rt).get({...e,url:"/v1/transport/kmb/stop"}),ha=e=>((e==null?void 0:e.client)??rt).get({...e,url:"/v1/transport/kmb/stop-eta/{stop_id}"});function _e(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function pa(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=_e(n);return(a,s)=>r.then(o=>s(o.transaction(t,a).objectStore(t)))}let fe;function at(){return fe||(fe=pa("keyval-store","keyval")),fe}function ga(e,t=at()){return t("readonly",n=>_e(n.get(e)))}function ya(e,t,n=at()){return n("readwrite",r=>(r.put(t,e),_e(r.transaction)))}async function me(e,t){const n=await t(),r=Date.now();return ya(e,n),localStorage.setItem(`${e}_timestamp`,r.toString()),{value:n,useCached:!1,lastUpdate:r}}async function va(e,t,n=60){const r=Number.parseInt(localStorage.getItem(`${e}_timestamp`)??"0",10);if(Date.now()-r>n*1e3)return me(e,t);try{const a=await ga(e);return a===void 0?me(e,t):{value:a,useCached:!0,lastUpdate:r}}catch{return me(e,t)}}function he(e){return typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="boolean"||e===null?Symbol.for(typeof e+String(e)):e.hashSymbol()}const wa={set(e,t){this.map.set(he(e),[e,t])},get(e){var t;return(t=this.map.get(he(e)))==null?void 0:t[1]},has(e){var t;return((t=this.map.get(he(e)))==null?void 0:t.some(n=>n===e))??!1},keys(){return Array.from(this.map.values()).map(([e])=>e)},entries(){return Array.from(this.map.values())},values(){return Array.from(this.map.values()).map(([,e])=>e)}};function st(){const e={map:new Map};return Object.setPrototypeOf(e,wa),e}class ba extends Error{}const _a={isOk(){return!0},isErr(){return!1},unwrap(){return this.val},andThen(e){return e(this.val)},andThenAwait(e){return e(this.val)}},xa={isOk(){return!1},isErr(){return!0},unwrap(){throw new ba(JSON.stringify(this.msg))},andThen(e){return this},andThenAwait(e){return Promise.resolve(this)}};function j(e){if(e===void 0)return j(null);const t={val:e};return Object.setPrototypeOf(t,_a),t}function ve(e){const t={msg:e};return Object.setPrototypeOf(t,xa),t}const R={MinutesLeft:e=>({kind:"MinutesLeft",value:e}),JustDeparted:()=>({kind:"JustDeparted",value:null}),NoEta:()=>({kind:"NoEta",value:null}),Err:e=>({kind:"Err",value:e})};function F(e,t){return Object.setPrototypeOf(e,t),e}const Sa={route(){return this._route},station(){return this._stop},items(){return this._items},co(){return"KMB"}},ka=F(Sa,{addEta(e,t){this._etaSeqs.includes(t)||(this._etaSeqs.push(t),this._items.push(e))}});function Pa(e){return F({_route:e.route,_stop:e.stop,_items:[],_etaSeqs:[]},ka)}const Oa=["A31","A32","A33","A33X","A34","A36","A37","A38","A41","A41P","A43","A43P","A47X","E31","E32","E32A","E33","E33P","E36","E36A","E36P","E36S","E37","E37C","E41","E42","E42C","E42P","E43","NA31","NA32","NA33","NA36","NA37","NA40","NA41","NA43","NA47","N30","N31","N42","N42A","N64","S1","S64","S64C","S64P","S64X","R8"];function Ea(e){return Oa.includes(e)}const Da={name(){return this.route},dest(){return this._dest},color(){return this.co==="KMB"?v("bg-[#ed151f]"):v("bg-[#f36c2e]")},equals(e){return this.hashSymbol()===e.hashSymbol()},hashSymbol(){return Symbol.for(`KmbRoute_${this.route}_${this._dest}`)}};function Ma(e){const t={...e,co:Ea(e.route)?"LWB":"KMB"};return F(t,Da)}function Ca(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const $a=Math.asin,Re=Math.cos,Ta=Math.sin,Wa=Math.sqrt,Aa=Math.PI,Fa=6378137;function Na(e){return e*e}function re(e){return e*Aa/180}function qe(e){return Na(Ta(e/2))}function Ba(e,t){const n=re(Array.isArray(e)?e[1]:e.latitude??e.lat),r=re(Array.isArray(t)?t[1]:t.latitude??t.lat),a=re(Array.isArray(e)?e[0]:e.longitude??e.lng??e.lon),s=re(Array.isArray(t)?t[0]:t.longitude??t.lng??t.lon),o=qe(r-n)+Re(n)*Re(r)*qe(s-a);return 2*Fa*$a(Wa(o))}var ja=Ba;const La=Ca(ja),ot={distance(e){return La({latitude:this.lat(),longitude:this.lon()},e)}};function xe(e){return F({...e},xe.prototype)}const Ra=F({name(){return this._name},lat(){return this._lat},lon(){return this._lon}},ot);xe.prototype=Ra;class qa{constructor({proxyUrl:t}){q(this,"client");q(this,"fetchStopListDelay",24*60*60);q(this,"fetchEtaDelay",20);this.client=ue({baseUrl:`${t}/https://data.etabus.gov.hk`})}async getStations(){const n=(await va("kmb_stop_list",async()=>(await ma({client:this.client})).data,this.fetchStopListDelay)).value;if(!n)return ve(new Error("Failed to fetch KMB stop list"));const r=[];for(const a of n.data)r.push(xe({id:a.stop,_name:a.name_tc,_lat:Number.parseFloat(a.lat),_lon:Number.parseFloat(a.long)}));return j(r)}async getStopEta(t){const n=await ha({path:{stop_id:t.id},client:this.client});if(!n.data)return ve(new Error("Failed to fetch KMB stop ETA"));const r=st();for(const a of n.data.data){const s=Ma({route:a.route,_dest:a.dest_tc});let o=R.Err(new Error("Unknown error"));if(a.eta===null)o=R.NoEta();else{const l=new Date(a.eta),f=new Date,b=l.getTime()-f.getTime();if(b<0)o=R.JustDeparted();else{const _=Math.ceil(b/60/1e3);o=R.MinutesLeft(_)}}let i=r.get(s);i===void 0&&(i=Pa({route:s,stop:t}),r.set(s,i)),i.addEta({val:o,rmk:a.rmk_tc},a.eta_seq)}return j(r.values())}async getNearbyStops(t,n,r){const a=await this.getStations();if(a.isErr())return a;const s=a.unwrap().filter(o=>o.distance({latitude:t,longitude:n})<=r);return j(s)}async getNearbyEtas(t,n,r){return(await this.getNearbyStops(t,n,r)).andThenAwait(async s=>{const o=s.map(async l=>this.getStopEta(l)),i=await Promise.all(o);return j(i.map(l=>l.unwrap()).flat())})}}const Ya=ue(be()),Va=e=>((e==null?void 0:e.client)??Ya).get({...e,url:"/v1/transport/mtr/lrt/getSchedule"}),Ua={route(){return this._route},station(){return this._stop},items(){return this._items},co(){return"LRT"}},Ia=F(Ua,{addEta(e){this._items.push(e)}});function Ha(e){return F({_route:e.route,_stop:e.stop,_items:[],_etaSeqs:[]},Ia)}const za={name(){return this.route},dest(){return this._dest},color(){switch(this.route){case"505":return v("bg-[#ef2d19]");case"507":return v("bg-[#00ab4f]");case"610":return v("bg-[#531b19]");case"614":return v("bg-[#35ccf6]");case"614P":return v("bg-[#ff8391]");case"615":return v("bg-[#ffd939]");case"615P":return v("bg-[#086285]");case"705":return v("bg-[#d9eece]");case"706":return v("bg-[#b07bbd]");case"751":return v("bg-[#ff7d24]");case"761P":return v("bg-[#582895]");default:return v("bg-gray-400")}}},Qa={equals(e){return this.hashSymbol()===e.hashSymbol()}},Ga=F({hashSymbol(){return Symbol.for(`LrtRoute_${this.route}_${this._dest}`)}},Qa);function Se(e){return F({...e},Se.prototype)}Se.prototype=F(za,Ga);function ke(e){return F({...e},ke.prototype)}const Xa=F({name(){return this._name},lat(){return this._lat},lon(){return this._lon}},ot);ke.prototype=Xa;async function Ka(){const e=await Tt(()=>import("./lrtStopList-CVGhKRzx.js"),[]),t=[];for(const n of e.default)t.push(ke({id:n.id,_name:n.name_tc,_lat:n.lat,_lon:n.lon}));return j(t)}class Ja{constructor({proxyUrl:t}){q(this,"client");q(this,"fetchStopListDelay",24*60*60);q(this,"fetchEtaDelay",20);this.client=ue({baseUrl:`${t}/http://rt.data.gov.hk`})}async getStations(){return Ka()}async getStopEta(t){const n=await Va({query:{station_id:t.id},client:this.client});if(!n.data)return ve(new Error("Failed to fetch KMB stop ETA"));const r=st();for(const a of n.data.platform_list)for(const s of a.route_list){const o=Se({route:s.route_no,_dest:s.dest_ch});let i=R.Err(new Error("Unknown error"));if(s.time_ch===null)i=R.NoEta();else if(s.time_ch==="-")i=R.JustDeparted();else if(s.time_ch==="即將抵達")i=R.MinutesLeft(0);else try{const f=Number.parseInt(s.time_ch,10);i=R.MinutesLeft(f)}catch(f){console.error(f)}let l=r.get(o);l===void 0&&(l=Ha({route:o,stop:t}),r.set(o,l)),l.addEta({val:i,trainLength:s.train_length})}return j(r.values())}async getNearbyStops(t,n,r){const a=await this.getStations();if(a.isErr())return a;const s=a.unwrap().filter(o=>o.distance({latitude:t,longitude:n})<=r);return j(s)}async getNearbyEtas(t,n,r){return(await this.getNearbyStops(t,n,r)).andThenAwait(async s=>{const o=s.map(async l=>this.getStopEta(l)),i=await Promise.all(o);return j(i.map(l=>l.unwrap()).flat())})}}const Za={read:e=>{try{const t=e.split(",");return t.length===1&&t[0]===""?new Set:new Set(t)}catch{return new Set}},write:e=>Array.from(e).join(",")},es={class:"flex flex-col gap-6 md:p-6"},ts={class:"flex items-center gap-2"},ns={class:"p-2"},is=S({__name:"HomeView",setup(e){const t=jt(),{proxyUrl:n}=t.value,r=new qa({proxyUrl:n}),a=new Ja({proxyUrl:n}),s=Oe("searchQuery",[]),o=Oe("favList",new Set,localStorage,{serializer:Za});function i(c){return s.value.every(g=>$.prototype.evaluate.call(g,c.entry))}const l=V({}),f=C(()=>Object.values(l.value).flat()),b=C(()=>pe(f.value,Jn(c=>c.key),or(i),ar(c=>-c.distance/t.value.maxDistance+(c.isFavourite?0:2)))),_=V(null),E=C(()=>_.value?zn(_.value,"HH:mm:ss"):"never");function h(c,g){const k=f.value.find(L=>L.key===c);k&&(k.isFavourite=g),g?o.value.add(c):o.value.delete(c)}async function d(){const c=await ia(),g={kmb:r,lrt:a};_.value=new Date,Object.entries(g).forEach(async([k,L])=>{(await L.getNearbyEtas(c.coords.latitude,c.coords.longitude,t.value.maxDistance)).andThen(it=>(l.value[k]=it.map(X=>{const Pe=X.route().name()+X.route().dest()+X.station().name();return{entry:X,distance:X.station().distance({lat:c.coords.latitude,lon:c.coords.longitude}),key:Pe,isFavourite:o.value.has(Pe)}}),j()))})}return Lt(()=>{d()},20*1e3,{immediateCallback:!0}),(c,g)=>(p(),P("div",es,[y(u(De),null,{default:m(()=>[y(u(Ee),{class:"pt-6"},{default:m(()=>[y(Yr,{modelValue:u(s),"onUpdate:modelValue":g[0]||(g[0]=k=>Wt(s)?s.value=k:null),"eta-entries":b.value},null,8,["modelValue","eta-entries"])]),_:1})]),_:1}),y(u(De),null,{default:m(()=>[y(u(sa),null,{default:m(()=>[y(u(oa),null,{default:m(()=>[w("div",ts,[g[1]||(g[1]=T(" 即時到站時間 ")),y(u(ye),null,{default:m(()=>[T("Total: "+W(b.value.length),1)]),_:1}),y(u(ye),{class:"bg-secondary text-secondary-foreground"},{default:m(()=>[T(" Last Updated: "+W(E.value),1)]),_:1}),y(aa)])]),_:1})]),_:1}),y(u(Ee),{class:"px-2"},{default:m(()=>[y(At,{name:"list"},{default:m(()=>[(p(!0),P(U,null,Q(b.value,k=>(p(),P("div",{key:k.key,class:"bg-card"},[y(u(Rt)),w("div",ns,[y(ta,{"is-favourite":k.isFavourite,item:k.entry,"onUpdate:isFavourite":L=>h(k.key,L)},null,8,["is-favourite","item","onUpdate:isFavourite"])])]))),128))]),_:1})]),_:1})]),_:1})]))}});export{is as default};
